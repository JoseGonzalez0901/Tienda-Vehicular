import{r as x,j as e}from"./index-BEvnYS48.js";import{b as A}from"./api-DUm3p9eQ.js";const B=s=>(s||"").toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(/\s+/g,"-");function g(s){return s.cover||s.image||s.thumbnail}function p(s){const r=s.category;return typeof r=="string"?r:(r==null?void 0:r.name)||""}function S(s){const r=s.category;return typeof r=="object"&&(r!=null&&r.slug)?r.slug:B(p(s))}function F(s){const r=s.author;return r?typeof r=="string"?r:r.name||"Autor":"Autor"}function $(s){return Number(s.readTime||5)}function D(s){return L(s.views)}function L(s){if(typeof s=="string"){const u=s.trim();if(/^\d+(\.\d+)?\s*[kKmMbB]$/.test(u))return u.replace(/\s+/g,"").toUpperCase()}const r=typeof s=="number"?s:Number(String(s).replace(/[^\d.]/g,"")||"0");if(!isFinite(r)||r<0)return"0";if(r<1e3)return r.toLocaleString("es-DO");const n=u=>{const o=Math.round(u*10)/10;return Number.isInteger(o)?String(o|0):o.toFixed(1)};return r<1e6?`${n(r/1e3)}K`:r<1e9?`${n(r/1e6)}M`:`${n(r/1e9)}B`}function f(s){const r=(s==null?void 0:s.publishedAt)??(s==null?void 0:s.date)??(s==null?void 0:s.createdAt);if(r==null)return"";const n=T(r);return n?n.toLocaleDateString("es-DO",{year:"numeric",month:"short",day:"2-digit"}):String(r)}function T(s){if(s==null)return null;if(typeof s=="number"||/^\d+$/.test(String(s))){const l=Number(s),m=l<1e12?l*1e3:l,d=new Date(m);return isNaN(d.getTime())?null:d}if(typeof s!="string")return null;const r=s.trim();if(!r)return null;const n=r.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(n){const[,l,m,d]=n,i=new Date(Number(l),Number(m)-1,Number(d));return isNaN(i.getTime())?null:i}if(/^\d{4}-\d{2}-\d{2}T/.test(r)&&/[Zz]|[+\-]\d{2}:\d{2}$/.test(r)){const l=new Date(r);return isNaN(l.getTime())?null:l}const u=r.match(/^(\d{4})-(\d{2})-(\d{2})T(\d{2})(?::(\d{2}))?(?::(\d{2}(?:\.\d+)?))?$/);if(u){const[,l,m,d,i,j="0",v="0"]=u,t=parseFloat(v),a=Math.floor(t),c=Math.round((t-a)*1e3),h=new Date(Number(l),Number(m)-1,Number(d),Number(i),Number(j),a,c);return isNaN(h.getTime())?null:h}const o=r.match(/^(\d{2})\/(\d{2})\/(\d{4})$/);if(o){const[,l,m,d]=o,i=new Date(Number(d),Number(m)-1,Number(l));return isNaN(i.getTime())?null:i}const N=r.match(/^(\d{2})[/-](\d{2})[/-](\d{4})$/);if(N){const[,l,m,d]=N,i=new Date(Number(d),Number(l)-1,Number(m));return isNaN(i.getTime())?null:i}const b=new Date(r);return isNaN(b.getTime())?null:b}const C=s=>{const r=(s==null?void 0:s.publishedAt)??(s==null?void 0:s.date)??(s==null?void 0:s.createdAt),n=T(r);return n?n.getTime():-1/0};function q(){const[s,r]=x.useState([]),[n,u]=x.useState(!0),[o,N]=x.useState(""),[b,l]=x.useState("all");x.useEffect(()=>{u(!0),A({page:1}).then(t=>r(t.posts||[])).finally(()=>u(!1))},[]);const m=x.useMemo(()=>{const t=new Map;return s.forEach(a=>{const c=p(a);if(!c)return;const h=S(a);t.has(h)||t.set(h,c)}),[{slug:"all",name:"Todos"},...Array.from(t,([a,c])=>({slug:a,name:c}))]},[s]),d=x.useMemo(()=>{let t=s;if(b!=="all"&&(t=t.filter(a=>S(a)===b)),o.trim()){const a=o.toLowerCase();t=t.filter(c=>(c.title||"").toLowerCase().includes(a)||(c.excerpt||"").toLowerCase().includes(a)||Array.isArray(c.tags)&&c.tags.some(h=>h.toLowerCase().includes(a)))}return t},[s,b,o]),i=x.useMemo(()=>{const t=[...d];return t.sort((a,c)=>C(c)-C(a)),t},[d]),j=i.slice(0,3),v=i.slice(3,15);return e.jsx("div",{className:"min-h-screen bg-[--bg] text-[--text]",children:e.jsxs("main",{className:"pb-20",children:[e.jsxs("div",{className:"container px-4 md:px-6 max-w-7xl mx-auto pt-6 text-sm text-[--muted] ",children:[e.jsx("a",{href:"#/",className:"hover:text-[--text]",children:"Inicio"}),e.jsx("span",{className:"mx-1",children:"›"}),e.jsx("span",{className:"text-[--text] font-medium",children:"Blog"})]}),e.jsx("section",{className:"container px-4 md:px-6 max-w-7xl mx-auto mt-6",children:e.jsxs("div",{className:"rounded-2xl border border-[--border] p-6 md:p-10 text-center",children:[e.jsx("h1",{className:"text-2xl md:text-4xl font-extrabold leading-tight max-w-3xl mx-auto",children:"Noticias y guías para comprar y mantener tu vehículo en RD"}),e.jsx("p",{className:"text-[--muted] mt-3 max-w-2xl mx-auto",children:"Consejos expertos, regulaciones actualizadas y mejores prácticas del mercado automotriz dominicano."}),e.jsxs("div",{className:"mt-6 relative max-w-xl mx-auto",children:[e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-[--muted]",children:"search"}),e.jsx("input",{value:o,onChange:t=>N(t.target.value),placeholder:"Buscar artículos, guías, noticias…",className:"w-full rounded-full bg-[--bg] border border-[--border] pl-10 pr-24 py-2.5"}),e.jsx("button",{onClick:()=>{},className:"absolute right-1 top-1/2 -translate-y-1/2 px-4 py-1.5 rounded-full bg-[--primary] text-[--primary-contrast] hover:bg-[--primary]/90",children:"Buscar"})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-3 gap-4 max-w-xl mx-auto",children:[e.jsx(y,{value:"50+",label:"Artículos especializados"}),e.jsx(y,{value:"15k+",label:"Lectores mensuales"}),e.jsx(y,{value:"24h",label:"Actualizaciones diarias"})]})]})}),e.jsx("section",{className:"container px-4 md:px-6 max-w-7xl mx-auto mt-6 justify-center text-center",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:m.map(t=>{const a=b===t.slug;return e.jsx("button",{onClick:()=>l(t.slug),className:`px-3 py-1.5 rounded-full text-sm border transition-colors ${a?"border-[--primary] text-[--text] bg-[--bg]":"border-[--border] text-[--muted] hover:text-[--text]"}`,children:t.name},t.slug)})})}),e.jsxs("section",{className:"container px-4 md:px-6 max-w-7xl mx-auto mt-8 grid lg:grid-cols-12 gap-8",children:[e.jsxs("div",{className:"lg:col-span-8",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Artículos Destacados"}),n?e.jsx(M,{}):e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-10",children:[j[0]&&e.jsx(k,{post:j[0],className:"md:col-span-2"}),e.jsx("div",{className:"flex flex-col gap-4",children:j.slice(1,3).map(t=>e.jsx(z,{post:t},t.id))})]}),e.jsxs("div",{className:"flex items-end justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Últimos artículos"}),e.jsxs("div",{className:"text-[--muted] text-sm",children:[i.length," resultado",i.length!==1?"s":""]})]}),n?e.jsx("div",{className:"grid [grid-template-columns:repeat(auto-fill,minmax(260px,1fr))] gap-3",children:Array.from({length:9}).map((t,a)=>e.jsx("div",{className:"rounded-2xl h-56 bg-[--surface] animate-pulse"},a))}):e.jsx("div",{className:"grid [grid-template-columns:repeat(auto-fill,minmax(260px,1fr))] gap-3",children:v.map(t=>e.jsx(R,{post:t},t.id))})]}),e.jsxs("aside",{className:"lg:col-span-4 space-y-6",children:[e.jsxs("div",{className:"rounded-2xl border border-[--border] bg-[--surface] p-4",children:[e.jsx("div",{className:"text-sm font-semibold mb-3",children:"Buscar artículos"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-[--muted]",children:"search"}),e.jsx("input",{value:o,onChange:t=>N(t.target.value),className:"w-full rounded-xl bg-[--bg] border border-[--border] pl-10 pr-3 py-2",placeholder:"¿Qué quieres aprender?"})]}),e.jsx("button",{className:"mt-3 w-full px-4 py-2 rounded-xl border border-[--border] hover:bg-[--bg]",children:"Buscar"})]}),e.jsxs("div",{className:"rounded-2xl border border-[--border] bg-[--surface] p-4",children:[e.jsx("div",{className:"text-sm font-semibold mb-3",children:"Más leídos"}),e.jsx("div",{className:"space-y-3",children:s.slice(0,6).map(t=>e.jsxs("a",{href:`#/blog-post?id=${t.id}`,className:"flex gap-3 group",children:[e.jsx("div",{className:"w-20 h-14 rounded-lg overflow-hidden bg-[--bg] border border-[--border]",children:g(t)&&e.jsx("img",{src:g(t),className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium group-hover:underline line-clamp-2",children:t.title}),e.jsxs("div",{className:"text-[--muted] text-xs mt-1",children:[$(t)," min • ",D(t)]})]})]},t.id))})]}),e.jsxs("div",{className:"rounded-2xl border border-[--border] bg-[--surface] p-4",children:[e.jsx("div",{className:"text-sm font-semibold mb-3",children:"Temas populares"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["financiamiento","seguros","mantenimiento","compra/venta","regulaciones","motos","SUV"].map(t=>e.jsxs("a",{className:"px-3 py-1.5 rounded-full border border-[--border] text-sm text-[--muted] hover:text-[--text]",href:"#/blog",children:["#",t]},t))})]}),e.jsxs("div",{className:"rounded-2xl border border-[--border] bg-[--surface] p-5 text-center",children:[e.jsx("div",{className:"text-sm font-semibold",children:"¿Listo para financiar?"}),e.jsx("p",{className:"text-[--muted] text-sm mt-1",children:"Simula tu cuota mensual en menos de 2 minutos"}),e.jsx("a",{href:"#/financing",className:"mt-3 inline-block px-4 py-2 rounded-xl bg-[--primary] text-[--primary-contrast]",children:"Simular cuota"})]}),e.jsxs("div",{className:"rounded-2xl border border-[--border] bg-[--surface] p-4",children:[e.jsx("div",{className:"text-sm font-semibold mb-2",children:"Newsletter"}),e.jsx("p",{className:"text-[--muted] text-sm mb-3",children:"Recibe las mejores ofertas y vehículos nuevos directamente en tu email."}),e.jsx("input",{className:"w-full rounded-xl bg-[--bg] border border-[--border] px-3 py-2 mb-2",placeholder:"Tu email"}),e.jsx("button",{className:"w-full px-4 py-2 rounded-xl border border-[--border] hover:bg-[--bg]",children:"Suscribirse"})]})]})]})]})})}function y({value:s,label:r}){return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:s}),e.jsx("div",{className:"text-[--muted] text-xs",children:r})]})}function M(){return e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-10",children:[e.jsx("div",{className:"md:col-span-2 rounded-2xl h-64 bg-[--surface] animate-pulse"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"rounded-2xl h-32 bg-[--surface] animate-pulse"}),e.jsx("div",{className:"rounded-2xl h-32 bg-[--surface] animate-pulse"})]})]})}function k({post:s,className:r=""}){return e.jsxs("a",{href:`#/blog-post?id=${s.id}`,className:`relative rounded-2xl overflow-hidden border border-[--border] bg-[--surface] group ${r}`,children:[e.jsx("div",{className:"aspect-[16/9] w-full bg-[--bg]",children:g(s)&&e.jsx("img",{src:g(s),className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-[1.02]"})}),e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"text-xs text-[--muted] mb-1 grid-rows-1 grid-cols-2 flex justify-between",children:[e.jsx("div",{children:p(s)}),e.jsx("div",{children:f(s)&&e.jsx(e.Fragment,{children:e.jsx("span",{children:f(s)})})})]}),e.jsx("h3",{className:"text-lg font-semibold leading-snug",children:s.title}),e.jsx("p",{className:"text-[--muted] text-sm mt-2 line-clamp-2",children:s.excerpt||""}),e.jsx(w,{post:s,className:"mt-4"})]})]})}function z({post:s}){return e.jsxs("a",{href:`#/blog-post?id=${s.id}`,className:"rounded-2xl overflow-hidden border border-[--border] bg-[--surface] group",children:[e.jsx("div",{className:"aspect-video w-full bg-[--bg]",children:g(s)&&e.jsx("img",{src:g(s),className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-[1.02]"})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"text-xs text-[--muted] mb-1 grid-rows-1 grid-cols-2 flex justify-between",children:[e.jsx("div",{children:p(s)}),e.jsx("div",{children:f(s)&&e.jsx(e.Fragment,{children:e.jsx("span",{children:f(s)})})})]}),e.jsx("h4",{className:"font-semibold leading-snug line-clamp-2",children:s.title}),e.jsx(w,{post:s,className:"mt-3"})]})]})}function R({post:s}){return e.jsxs("a",{href:`#/blog-post?id=${s.id}`,className:"rounded-2xl overflow-hidden border border-[--border] bg-[--surface] group",children:[e.jsx("div",{className:"aspect-video w-full bg-[--bg]",children:g(s)&&e.jsx("img",{src:g(s),className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-[1.02]"})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"text-xs text-[--muted] mb-1 grid-rows-1 grid-cols-2 flex justify-between",children:[e.jsx("div",{children:p(s)}),e.jsx("div",{children:f(s)&&e.jsx(e.Fragment,{children:e.jsx("span",{children:f(s)})})})]}),e.jsx("div",{className:"font-semibold leading-snug line-clamp-2",children:s.title}),e.jsx("p",{className:"text-[--muted] text-sm mt-1 line-clamp-2",children:s.excerpt||""}),e.jsx(w,{post:s,className:"mt-3"})]})]})}function w({post:s,className:r=""}){return e.jsxs("div",{className:`flex text-center gap-3 text-[--muted] text-xs  ${r}`,children:[e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[--muted] text-sm",children:"person"}),F(s)]}),e.jsx("span",{className:"material-symbols-outlined text-[--muted] text-sm",children:"pace"}),e.jsxs("span",{children:[$(s)," min"]}),e.jsxs("span",{className:"ml-auto inline-flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[--muted] text-sm",children:"visibility"}),D(s)]})]})}export{q as default};
