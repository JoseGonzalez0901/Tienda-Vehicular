import{j as e,r as i}from"./index-BEvnYS48.js";import{f as C,a as F}from"./api-DUm3p9eQ.js";function $(){return e.jsxs("section",{className:"container mx-auto px-4 pt-10 pb-8 text-center",children:[e.jsx("h1",{className:"heading font-extrabold tracking-tight text-[32px] md:text-[44px] lg:text-[56px]",children:"Encuentra tu próximo vehículo"}),e.jsx("p",{className:"mt-3 text-[--muted] max-w-2xl mx-auto leading-relaxed",children:"Descubre la mejor selección de vehículos en República Dominicana con opciones de financiamiento flexibles"})]})}function D({onApply:s,onTypeChange:a}){const[r,o]=i.useState(!0),[d,c]=i.useState(["carro","suv","motocicleta","camioneta"]),[l,n]=i.useState([]),[p,v]=i.useState([]),[N,y]=i.useState([]),[w,S]=i.useState([]),[m,f]=i.useState({});i.useEffect(()=>{C().then(t=>{var g;(g=t.types)!=null&&g.length&&c(t.types),n(t.brands||[]),v(t.models||[]),y(t.years||[]),S(t.provinces||[])}).finally(()=>o(!1))},[]);const x=t=>{const g={...m,...t};f(g),t.type&&(a==null||a(t.type))},k=()=>s==null?void 0:s(m),M=()=>{f({}),s==null||s({})};return e.jsxs("form",{className:"space-y-10",onSubmit:t=>{t.preventDefault(),k()},children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3",children:[e.jsx(u,{label:"Tipo",icon:"directions_car",value:m.type,onChange:t=>x({type:t}),options:d}),e.jsx(u,{label:"Marca",icon:"branding_watermark",value:m.brand,onChange:t=>x({brand:t}),options:l}),e.jsx(u,{label:"Modelo",icon:"directions_car",value:m.model,onChange:t=>x({model:t}),options:p}),e.jsx(u,{label:"Año",icon:"calendar_month",value:m.year??"",onChange:t=>x({year:t?Number(t):void 0}),options:N.map(String)}),e.jsx(u,{label:"Provincia",icon:"location_on",value:m.province,onChange:t=>x({province:t}),options:w}),e.jsx(u,{label:"Condición",icon:"verified",value:m.condition??"",onChange:t=>x({condition:t||void 0}),options:["Nuevo","Usado"]})]}),e.jsxs("div",{className:"flex items-center gap-6 sm:justify-center ",children:[e.jsxs("button",{type:"submit",className:"px-4 py-2 rounded-xl bg-[--primary] text-[--primary-contrast] hover:bg-[--primary]/90 inline-flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined","aria-hidden":"true",children:"search"}),"Buscar"]}),e.jsxs("button",{type:"button",onClick:M,className:"text-[--muted] hover:text-[--text] inline-flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined","aria-hidden":"true",children:"close"}),"Borrar filtros"]}),r&&e.jsx("span",{className:"text-xs text-[--muted]",children:"Cargando filtros…"})]})]})}function u({label:s,icon:a,options:r,className:o="",value:d,onChange:c}){return e.jsxs("label",{className:"flex flex-col gap-1 "+o,children:[e.jsxs("span",{className:"text-xs text-[--muted] flex items-center gap-3",children:[a&&e.jsx("span",{className:"material-symbols-outlined text-[--muted]","aria-hidden":"true",children:a}),s]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:`w-full appearance-none rounded-full bg-[--bg] border border-[--border]
                     px-5 py-2.5 pr-10 text-[--text] focus:outline-none`,value:d??"",onChange:l=>c==null?void 0:c(l.target.value||""),children:[e.jsx("option",{value:"",children:"Todos"}),r.map(l=>e.jsx("option",{value:l,children:l},l))]}),e.jsx("span",{className:`material-symbols-outlined absolute right-3 top-1/2 -translate-y-1/2
                     text-[--muted] pointer-events-none`,"aria-hidden":"true",children:"expand_more"})]})]})}const h="/",T={carro:`${h}vectors/carro.svg`,camioneta:`${h}vectors/camioneta.svg`,suv:`${h}vectors/suv.svg`,motocicleta:`${h}vectors/motocicleta.svg`};function V({vehicleType:s}){const a=T[s]??`${h}vectors/carro.svg`;return e.jsx("div",{className:"flex justify-center my-8",children:e.jsx("img",{src:a,alt:`Vector ${s}`,className:"w-full max-w-[450px] h-auto select-none pointer-events-none",draggable:!1,style:{opacity:1,transform:"scale(1.5)"}})})}const j=s=>`RD$${Math.round(s||0).toLocaleString("es-DO")}`,b={downPct:.2,term:36,apr:22};function _(s){const a=Math.max(s*(1-b.downPct),0),r=b.apr/100/12;return a*(r*Math.pow(1+r,b.term))/(Math.pow(1+r,b.term)-1)}const I=({className:s="w-4 h-4"})=>e.jsxs("svg",{viewBox:"0 0 24 24",className:s,fill:"none",stroke:"currentColor",strokeWidth:"1.7",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),e.jsx("path",{d:"M16 2v4M8 2v4M3 10h18"})]}),P=({className:s="w-4 h-4"})=>e.jsxs("svg",{viewBox:"0 0 24 24",className:s,fill:"none",stroke:"currentColor",strokeWidth:"1.7",children:[e.jsx("circle",{cx:"12",cy:"12",r:"8"}),e.jsx("path",{d:"M12 12l4-3M6 12h2M16 12h2M12 6v2M12 16v2"})]}),B=({className:s="w-4 h-4"})=>e.jsx("svg",{viewBox:"0 0 24 24",className:s,fill:"currentColor",children:e.jsx("path",{d:"M12 2a6 6 0 0 0-6 6c0 4.8 5 10.2 5.6 10.8.23.25.57.25.8 0C13 18.2 18 12.8 18 8a6 6 0 0 0-6-6zm0 8.5a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5z"})});function E({vehicle:s}){var n;const a=s.condition==="Nuevo",r=(n=s.photos)==null?void 0:n[0],o=Number(s.price)||0,d=i.useMemo(()=>_(o),[o]),c=()=>{localStorage.setItem("lastVehicleId",s.id),location.assign(`#/financing?id=${s.id}`)},l=()=>{localStorage.setItem("lastVehicleId",s.id),location.assign(`#/vehicle?id=${s.id}`)};return e.jsxs("article",{className:"group min-w-[226px] rounded-2xl border border-[--border] bg-[--surface] overflow-hidden shadow-card text-[--text]",children:[e.jsx("button",{onClick:l,className:"block w-full overflow-hidden relative",children:e.jsxs("div",{className:"relative aspect-[4/3]",children:[r?e.jsx("img",{src:r,alt:`${s.brand} ${s.model}`,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-[1.04]",loading:"lazy"}):e.jsx("div",{className:"w-full h-full grid place-items-center text-[--muted]",children:"Sin imagen"}),e.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:"linear-gradient(180deg, rgba(0,0,0,0.00) 50%, rgba(0,0,0,0.25) 100%)"}}),e.jsxs("div",{className:"absolute top-3 left-3 flex gap-2",children:[s.condition&&e.jsx("span",{className:`px-2 py-1 rounded-full text-[11px] font-medium border ${a?"backdrop-blur-sm bg-green-800/85 text-white border-white/30":"backdrop-blur-sm bg-gray-600/70 text-[--text] border-white/30"}`,children:s.condition}),s.isFinanceable&&e.jsx("span",{className:"px-2 py-1 rounded-full text-[11px] font-medium bg-blue-900/85 text-white border border-[--primary]/40",children:"Financiable"})]})]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("h3",{className:"font-semibold text-[1.05rem] leading-tight",children:[s.brand," ",s.model," ",s.year]}),e.jsx("div",{className:"mt-2 text-2xl font-extrabold tracking-tight",children:j(o)}),e.jsxs("div",{className:"mt-1 text-sm",children:[e.jsx("span",{className:"text-[--muted]",children:"Cuota estimada"})," ",e.jsxs("span",{className:"text-[--muted]",children:[j(d),"/mes"]})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-3 gap-x-4 gap-y-1 text-sm",children:[e.jsxs("div",{className:"sm:col-span-1 flex items-center gap-2 whitespace-nowrap min-w-[90px]",children:[e.jsx(I,{className:"w-4 h-4 shrink-0"}),s.year||"N/D"]}),e.jsxs("div",{className:"sm:col-span-2 flex items-center gap-2 whitespace-nowrap min-w-[150px] sm:justify-c",children:[e.jsx(P,{className:"w-4 h-4 shrink-0"}),(s.mileageKm??0).toLocaleString("es-DO")," km"]}),e.jsxs("div",{className:"col-span-1 sm:col-span-3 flex items-center gap-2 mt-1",children:[e.jsx(B,{className:"w-4 h-4 shrink-0"}),e.jsx("span",{className:"truncate",children:s.location||"—"})]})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("button",{onClick:c,className:"flex-1 px-3 py-2 rounded-xl bg-[--primary] text-[--primary-contrast] hover:bg-[blue]/50",children:"Financiar"}),e.jsx("button",{onClick:l,className:"px-4 py-2 rounded-xl border border-[--border] hover:bg-[--bg]",children:"Detalles"})]})]})]})}function O({filters:s}){const[a,r]=i.useState("recientes"),[o,d]=i.useState([]),[c,l]=i.useState(!0);return i.useEffect(()=>{let n=!0;return l(!0),F({tab:a,limit:10,filters:s,defaultType:(s==null?void 0:s.type)??"carro"}).then(p=>{n&&d(p.items)}).catch(()=>{n&&d([])}).finally(()=>{n&&l(!1)}),()=>{n=!1}},[a,JSON.stringify(s)]),e.jsxs("section",{children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"inline-flex gap-2 bg-bg/60 border border-border p-1 rounded-full",children:["recientes","populares","ofertas"].map(n=>e.jsx("button",{onClick:()=>r(n),className:"px-4 py-2 rounded-full text-sm transition-colors "+(a===n?"bg-[--primary] text-[--primary-contrast] shadow-overlay":"hover:bg-surface/80"),children:n[0].toUpperCase()+n.slice(1)},n))})}),c?e.jsx("div",{className:"grid [grid-template-columns:repeat(auto-fill,minmax(225px,1fr))] gap-2",children:Array.from({length:10}).map((n,p)=>e.jsx("div",{className:"h-56 bg-[--surface] animate-pulse rounded-2xl"},p))}):e.jsx("div",{className:"grid [grid-template-columns:repeat(auto-fill,minmax(225px,1fr))] gap-2",children:o.map(n=>e.jsx(E,{vehicle:n},n.id))})]})}function L(){return e.jsxs("section",{className:"text-center py-10 rounded-2xl",children:[e.jsx("h2",{className:"heading text-2xl md:text-3xl font-bold",children:"Financia tu vehículo ideal"}),e.jsx("p",{className:"text-[--muted] mt-2",children:"Obtén tu vehículo hoy con cuotas desde RD$ 8,000/mes. Proceso rápido y sin complicaciones."}),e.jsx("a",{href:"#/financing",className:"inline-flex items-center gap-2 mt-5 px-5 py-2.5 rounded-xl bg-[--primary] text-[--primary-contrast] hover:bg-[--primary]/90",children:"Simular financiamiento"})]})}function R(){const s=[{icon:e.jsx("span",{className:"material-symbols-outlined",children:"fact_check"}),title:"Vehículos Verificados",text:"Todos nuestros vehículos pasan por una rigurosa inspección de calidad"},{icon:e.jsx("span",{className:"material-symbols-outlined",children:"acute"}),title:"Atención rápida",text:"Respuesta inmediata a todas tus consultas a través de WhatsApp"},{icon:e.jsx("span",{className:"material-symbols-outlined",children:"percent_discount"}),title:"Financiamiento",text:"Planes flexibles adaptados a tu presupuesto y necesidades"}];return e.jsxs(e.Fragment,{children:[e.jsx("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"}),e.jsx("section",{className:"grid md:grid-cols-3 gap-4",children:s.map((a,r)=>e.jsxs("div",{className:"rounded-2xl p-6 text-center",children:[e.jsx("div",{className:"text-3xl",children:a.icon}),e.jsx("h3",{className:"heading font-semibold mt-2",children:a.title}),e.jsx("p",{className:"text-sm text-[--muted] mt-1",children:a.text})]},r))})]})}function U(){const[s,a]=i.useState({}),[r,o]=i.useState("carro");return e.jsxs(e.Fragment,{children:[e.jsx($,{}),e.jsx("div",{className:"container mx-auto px-4",children:e.jsx("div",{className:"mx-auto max-w-5xl  p-4 md:p-6 rounded-2xl shadow-lg border border-gray-700",children:e.jsx(D,{onApply:a,onTypeChange:o})})}),e.jsx("div",{className:"container mx-auto px-4",children:e.jsx(V,{vehicleType:r})}),e.jsx("div",{className:"container mx-auto px-4 mt-6",children:e.jsx(O,{filters:s})}),e.jsx("div",{className:"container mx-auto px-4 mt-14",children:e.jsx(L,{})}),e.jsx("div",{className:"container mx-auto px-4 mt-10",children:e.jsx(R,{})})]})}export{U as default};
